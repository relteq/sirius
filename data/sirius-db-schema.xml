<?xml version="1.0" encoding="utf-8"?>

<!DOCTYPE database SYSTEM
	"http://db.apache.org/torque/dtd/database_3_3.dtd">

<database name="sirius">
	<domain name="STRING_ID" type="VARCHAR" size="255"/>
	<domain name="NAME_BUF" type="VARCHAR" size="64"/>
	<domain name="DESCRIPTION_BUF" type="VARCHAR" size="2048"/>
	<domain name="ELEMENT_TYPE" type="VARCHAR" size="32"/>
	<domain name="MODEL_TYPE" type="VARCHAR" size="32"/>
	<domain name="ENCODED_SHAPE" type="VARCHAR" size="2048"/>
	<domain name="AGGREGATION" type="VARCHAR" size="8"/>
	<domain name="EXE_STATUS" type="INTEGER"/>
	<domain name="BOOL" type="BOOLEANCHAR"/>
	<domain name="DECIMAL" type="DECIMAL" size="31" scale="16"/>



	<!-- **************************************************************************** -->

	
	<!-- Scenario Configuration -->
	
	<!-- Road Network -->

	<table name="networks">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
		<column name="project_id" required="true" domain="STRING_ID"/>
		<column name="seed_network_id" domain="STRING_ID"/>
		<column name="name" domain="NAME_BUF"/>
		<column name="description" domain="DESCRIPTION_BUF"/>
	</table>

	<table name="node_families">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
	</table>

	<table name="nodes">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
		<column name="network_id" primaryKey="true" domain="STRING_ID"/>
		<column name="name" domain="NAME_BUF"/>
		<column name="description" domain="DESCRIPTION_BUF"/>
		<column name="type" required="true" domain="ELEMENT_TYPE"/>
		<column name="latitude" required="true" domain="DECIMAL"/>
		<column name="longitude" required="true" domain="DECIMAL"/>
		<column name="elevation" required="true" domain="DECIMAL"/>
		<column name="postmile" domain="DECIMAL" description="Absolute postmile."/>
		<column name="model" required="true" domain="MODEL_TYPE" description="Type of node model, e.g. STANDARD."/>
		<column name="synchronized" javaName="is_synchronized" domain="BOOL" description="This flag indicates whether the node type and position are in sync with the other nodes in the family."/>
		<foreign-key foreignTable="node_families">
			<reference local="id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="networks">
			<reference local="network_id" foreign="id"/>
		</foreign-key>
	</table>

	<table name="link_families">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
	</table>

	<table name="links">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
		<column name="network_id" primaryKey="true" domain="STRING_ID"/>
		<column name="begin_node_id" required="true" domain="STRING_ID"/>
		<column name="end_node_id" required="true" domain="STRING_ID"/>
		<column name="name" domain="NAME_BUF"/>
		<column name="road_name" domain="NAME_BUF"/>
		<column name="description" domain="DESCRIPTION_BUF"/>
		<column name="type" required="true" domain="ELEMENT_TYPE"/>
		<column name="shape" domain="ENCODED_SHAPE" description="Geo shape encoded in Google format."/>
		<column name="lanes" required="true" domain="DECIMAL" description="Number of lanes."/>
		<column name="length" required="true" domain="DECIMAL" description="Length in miles."/>
		<column name="model" required="true" domain="MODEL_TYPE" description="Type of link model, e.g. CTM."/>
		<column name="display_lane_offset" domain="DECIMAL"/>
		<column name="synchronized" javaName="is_synchronized" domain="BOOL" description="This flag indicates whether the link configuration is synchronized with the rest of the links in the family."/>
		<foreign-key foreignTable="link_families">
			<reference local="id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="networks">
			<reference local="network_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="node_families">
			<reference local="begin_node_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="node_families">
			<reference local="end_node_id" foreign="id"/>
		</foreign-key>
	</table>

	<table name="network_connection_lists">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
		<column name="project_id" required="true" domain="STRING_ID"/>
		<column name="name" domain="NAME_BUF"/>
		<column name="description" domain="DESCRIPTION_BUF"/>
	</table>

	<table name="network_connections">
		<column name="network_connection_list_id" required="true" domain="STRING_ID"/>
		<column name="from_network_id" required="true" domain="STRING_ID"/>
		<column name="from_link_id" required="true" domain="STRING_ID"/>
		<column name="to_network_id" required="true" domain="STRING_ID"/>
		<column name="to_link_id" required="true" domain="STRING_ID"/>
		<foreign-key foreignTable="network_connection_lists">
			<reference local="network_connection_list_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="networks">
			<reference local="from_network_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="link_families">
			<reference local="from_link_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="networks">
			<reference local="to_network_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="link_families">
			<reference local="to_link_id" foreign="id"/>
		</foreign-key>
	</table>


	<!-- ODs, Route Segments, Decision Points TODO -->

	<table name="od_lists">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
		<column name="project_id" required="true" domain="STRING_ID"/>
		<column name="name" domain="NAME_BUF"/>
		<column name="description" domain="DESCRIPTION_BUF"/>
	</table>

	<table name="ods">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
		<column name="od_list_id" required="true" domain="STRING_ID"/>
		<column name="origin_link_id" required="true" domain="STRING_ID"/>
		<column name="destination_link_id" required="true" domain="STRING_ID"/>
		<foreign-key foreignTable="od_lists">
			<reference local="od_list_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="link_families">
			<reference local="origin_link_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="link_families">
			<reference local="destination_link_id" foreign="id"/>
		</foreign-key>
	</table>

	<table name="route_segments">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
		<column name="project_id" required="true" domain="STRING_ID"/>
		<column name="name" domain="NAME_BUF"/>
		<column name="description" domain="DESCRIPTION_BUF"/>
	</table>

	<table name="route_segment_links">
		<column name="link_id" primaryKey="true" domain="STRING_ID"/>
		<column name="route_segment_id" primaryKey="true" domain="STRING_ID"/>
		<column name="number" required="true" type="INTEGER" description="Order of the link in the route segment."/>
		<foreign-key foreignTable="link_families">
			<reference local="link_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="route_segments">
			<reference local="route_segment_id" foreign="id"/>
		</foreign-key>
	</table>

	<table name="od_route_segments">
		<column name="od_id" primaryKey="true" domain="STRING_ID"/>
		<column name="route_segment_id" primaryKey="true" domain="STRING_ID"/>
		<foreign-key foreignTable="ods">
			<reference local="od_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="route_segments">
			<reference local="route_segment_id" foreign="id"/>
		</foreign-key>
	</table>

	<table name="od_decision_points">
		<column name="od_id" primaryKey="true" domain="STRING_ID"/>
		<column name="node_id" primaryKey="true" domain="STRING_ID"/>
		<foreign-key foreignTable="ods">
			<reference local="od_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="node_families">
			<reference local="node_id" foreign="id"/>
		</foreign-key>
	</table>



	<!-- Routes TODO -->


	<!-- Vehicle Types -->

	<table name="vehicle_type_lists">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
		<column name="project_id" required="true" domain="STRING_ID"/>
	</table>

	<table name="vehicle_type_families">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
	</table>

	<table name="vehicle_types">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
		<column name="project_id" primaryKey="true" domain="STRING_ID"/>
		<column name="weight" required="true" domain="DECIMAL" description="This value is 1 for usual vehicles, and typically 3 for trucks."/>
		<column name="name" required="true" domain="NAME_BUF"/>
		<column name="standard" required="true" domain="BOOL" description="Flag indicating whether this is a standard type (if true) or user-defined."/>
		<foreign-key foreignTable="vehicle_type_families">
			<reference local="id" foreign="id"/>
		</foreign-key>
	</table>

	<table name="vehicle_types_in_lists">
		<column name="vehicle_type_list_id" required="true" domain="STRING_ID"/>
		<column name="vehicle_type_id" required="true" domain="STRING_ID"/>
		<foreign-key foreignTable="vehicle_type_lists">
			<reference local="vehicle_type_list_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="vehicle_type_families">
			<reference local="vehicle_type_id" foreign="id"/>
		</foreign-key>
	</table>

	
	<!-- Initial Conditions -->

	<table name="initial_density_sets">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
		<column name="project_id" required="true" domain="STRING_ID"/>
		<column name="name" domain="NAME_BUF"/>
		<column name="description" domain="DESCRIPTION_BUF"/>
	</table>

	<table name="initial_densities">
		<column name="initial_density_set_id" primaryKey="true" domain="STRING_ID"/>
		<column name="link_id" primaryKey="true" domain="STRING_ID"/>
		<column name="vehicle_type_id" primaryKey="true" domain="STRING_ID"/>
		<column name="density" domain="DECIMAL"/>
		<foreign-key foreignTable="initial_density_sets">
			<reference local="initial_density_set_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="link_families">
			<reference local="link_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="vehicle_type_families">
			<reference local="vehicle_type_id" foreign="id"/>
		</foreign-key>
	</table>


	<!-- Weaving -->

	<table name="weaving_factor_sets">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
		<column name="project_id" required="true" domain="STRING_ID"/>
		<column name="name" domain="NAME_BUF"/>
		<column name="description" domain="DESCRIPTION_BUF"/>
	</table>

	<table name="weaving_factors">
		<column name="weaving_factor_set_id" primaryKey="true" domain="STRING_ID"/>
		<column name="in_link_id" primaryKey="true" domain="STRING_ID"/>
		<column name="out_link_id" primaryKey="true" domain="STRING_ID"/>
		<column name="vehicle_type_id" primaryKey="true" domain="STRING_ID"/>
		<column name="factor" domain="DECIMAL" description="Should be greater than 1 for downstream merge weaving, or less than -1 for upstream diverge weaving. 1 and -1 represent no weaving."/>
		<foreign-key foreignTable="weaving_factor_sets">
			<reference local="weaving_factor_set_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="link_families">
			<reference local="in_link_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="link_families">
			<reference local="out_link_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="vehicle_type_families">
			<reference local="vehicle_type_id" foreign="id"/>
		</foreign-key>
	</table>


	<!-- Split Ratios -->

	<table name="split_ratio_profile_sets">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
		<column name="project_id" required="true" domain="STRING_ID"/>
		<column name="name" domain="NAME_BUF"/>
		<column name="description" domain="DESCRIPTION_BUF"/>
	</table>

	<table name="split_ratio_profiles">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
		<column name="split_ratio_profile_set_id" required="true" domain="STRING_ID"/>
		<column name="node_id" required="true" domain="STRING_ID"/>
		<column name="dt" domain="DECIMAL" description="Sampling rate in seconds."/>
		<column name="start_time" required="true" domain="DECIMAL" description="Start time in seconds."/>
		<foreign-key foreignTable="split_ratio_profile_sets">
			<reference local="split_ratio_profile_set_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="node_families">
			<reference local="node_id" foreign="id"/>
		</foreign-key>
	</table>

	<table name="split_ratios">
		<column name="split_ratio_profile_id" primaryKey="true" domain="STRING_ID"/>
		<column name="in_link_id" primaryKey="true" domain="STRING_ID"/>
		<column name="out_link_id" primaryKey="true" domain="STRING_ID"/>
		<column name="vehicle_type_id" primaryKey="true" domain="STRING_ID"/>
		<column name="ts" primaryKey="true" type="TIME" description="Here we only need time entry without date."/>
		<column name="split_ratio" required="true" domain="DECIMAL" description="Value between 0 and 1."/>
		<foreign-key foreignTable="split_ratio_profiles">
			<reference local="split_ratio_profile_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="link_families">
			<reference local="in_link_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="link_families">
			<reference local="out_link_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="vehicle_type_families">
			<reference local="vehicle_type_id" foreign="id"/>
		</foreign-key>
	</table>


	<!-- Decision Point Splits -->

	<table name="decision_point_split_profile_sets">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
		<column name="project_id" required="true" domain="STRING_ID"/>
		<column name="name" domain="NAME_BUF"/>
		<column name="description" domain="DESCRIPTION_BUF"/>
	</table>

	<table name="decision_point_split_profiles">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
		<column name="decision_point_split_profile_set_id" required="true" domain="STRING_ID"/>
		<column name="node_id" required="true" domain="STRING_ID"/>
		<column name="dt" domain="DECIMAL" description="Sampling rate in seconds."/>
		<column name="start_time" required="true" domain="DECIMAL" description="Start time in seconds."/>
		<foreign-key foreignTable="decision_point_split_profile_sets">
			<reference local="decision_point_split_profile_set_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="node_families">
			<reference local="node_id" foreign="id"/>
		</foreign-key>
	</table>

	<table name="decision_point_splits">
		<column name="decision_point_split_profile_id" primaryKey="true" domain="STRING_ID"/>
		<column name="in_route_segment_id" primaryKey="true" domain="STRING_ID"/>
		<column name="out_route_segment_id" primaryKey="true" domain="STRING_ID"/>
		<column name="vehicle_type_id" primaryKey="true" domain="STRING_ID"/>
		<column name="ts" primaryKey="true" type="TIME" description="Here we only need time entry without date."/>
		<column name="split" required="true" domain="DECIMAL" description="Split ratio between 0 and 1."/>
		<foreign-key foreignTable="decision_point_split_profiles">
			<reference local="decision_point_split_profile_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="route_segments">
			<reference local="in_route_segment_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="route_segments">
			<reference local="out_route_segment_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="vehicle_type_families">
			<reference local="vehicle_type_id" foreign="id"/>
		</foreign-key>
	</table>


	<!-- Fundamental Diagrams -->

	<table name="fundamental_diagram_profile_sets">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
		<column name="project_id" required="true" domain="STRING_ID"/>
		<column name="name" domain="NAME_BUF"/>
		<column name="description" domain="DESCRIPTION_BUF"/>
	</table>

	<table name="fundamental_diagram_profiles">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
		<column name="fundamental_diagram_profile_set_id" required="true" domain="STRING_ID"/>
		<column name="link_id" required="true" domain="STRING_ID"/>
		<column name="dt" domain="DECIMAL" description="Sampling rate in seconds."/>
		<column name="start_time" required="true" domain="DECIMAL" description="Start time in seconds."/>
		<foreign-key foreignTable="fundamental_diagram_profile_sets">
			<reference local="fundamental_diagram_profile_set_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="link_families">
			<reference local="link_id" foreign="id"/>
		</foreign-key>
	</table>

	<table name="fundamental_diagrams">
		<column name="fundamental_diagram_profile_id" primaryKey="true" domain="STRING_ID"/>
		<column name="ts" primaryKey="true" type="TIME" description="Here we only need time entry without date."/>
		<column name="free_flow_speed" required="true" domain="DECIMAL" description="Free flow speed in mph."/>
		<column name="congestion_wave_speed" required="true" domain="DECIMAL" description="Congestion wave speed in mph."/>
		<column name="capacity" required="true" domain="DECIMAL" description="Maximum flow per lane in vehicles per hour per lane (vphl)."/>
		<column name="jam_density" domain="DECIMAL" description="Maximum density per lane in vehicles per mile per lane (vphl). Optional - used for trapezoidal fundamental diagrams."/>
		<column name="capacity_drop" domain="DECIMAL" description="Capacity drop in vphl. Optional."/>
		<column name="std_deviation_capacity" domain="DECIMAL" description="Expression of uncertainty in capacity in vphl. Optional."/>
		<foreign-key foreignTable="fundamental_diagram_profiles">
			<reference local="fundamental_diagram_profile_id" foreign="id"/>
		</foreign-key>
	</table>


	<!-- Demands - default ones, unassigned to destinations -->

	<table name="demand_profile_sets">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
		<column name="project_id" required="true" domain="STRING_ID"/>
		<column name="name" domain="NAME_BUF"/>
		<column name="description" domain="DESCRIPTION_BUF"/>
	</table>

	<table name="demand_profiles">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
		<column name="demand_profile_set_id" required="true" domain="STRING_ID"/>
		<column name="link_id" required="true" domain="STRING_ID"/>
		<column name="dt" domain="DECIMAL" description="Sampling rate in seconds."/>
		<column name="start_time" required="true" domain="DECIMAL" description="Start time in seconds."/>
		<column name="knob" domain="DECIMAL" description="Coefficient by which the demand is multiplied before being fed to the simulation. Default value is 1."/>
		<column name="std_deviation_additive" domain="DECIMAL" description="Demand uncertainty in vph. Default value is 0."/>
		<column name="std_deviation_multiplicative" domain="DECIMAL" description="Demand uncertainty. Default value is 1."/>
		<foreign-key foreignTable="demand_profile_sets">
			<reference local="demand_profile_set_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="link_families">
			<reference local="link_id" foreign="id"/>
		</foreign-key>
	</table>

	<table name="demands">
		<column name="demand_profile_id" primaryKey="true" domain="STRING_ID"/>
		<column name="vehicle_type_id" primaryKey="true" domain="STRING_ID"/>
		<column name="ts" primaryKey="true" type="TIME" description="Here we only need time entry without date."/>
		<column name="demand" required="true" domain="DECIMAL" description="Demand flow in vph."/>
		<foreign-key foreignTable="demand_profiles">
			<reference local="demand_profile_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="vehicle_type_families">
			<reference local="vehicle_type_id" foreign="id"/>
		</foreign-key>
	</table>


	<!-- Demands by Destination -->

	<table name="od_demand_profile_sets">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
		<column name="project_id" required="true" domain="STRING_ID"/>
		<column name="name" domain="NAME_BUF"/>
		<column name="description" domain="DESCRIPTION_BUF"/>
	</table>

	<table name="od_demand_profiles">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
		<column name="od_demand_profile_set_id" required="true" domain="STRING_ID"/>
		<column name="od_id" required="true" domain="STRING_ID"/>
		<column name="dt" domain="DECIMAL" description="Sampling rate in seconds."/>
		<column name="start_time" required="true" domain="DECIMAL" description="Start time in seconds."/>
		<column name="knob" domain="DECIMAL" description="Coefficient by which the demand is multiplied before being fed to the simulation. Default value is 1."/>
		<column name="std_deviation_additive" domain="DECIMAL" description="Demand uncertainty in vph. Default value is 0."/>
		<column name="std_deviation_multiplicative" domain="DECIMAL" description="Demand uncertainty. Default value is 1."/>
		<foreign-key foreignTable="od_demand_profile_sets">
			<reference local="od_demand_profile_set_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="ods">
			<reference local="od_id" foreign="id"/>
		</foreign-key>
	</table>

	<table name="od_demands">
		<column name="od_demand_profile_id" primaryKey="true" domain="STRING_ID"/>
		<column name="vehicle_type_id" primaryKey="true" domain="STRING_ID"/>
		<column name="ts" primaryKey="true" type="TIME" description="Here we only need time entry without date."/>
		<column name="od_demand" required="true" domain="DECIMAL" description="Demand flow in vph."/>
		<foreign-key foreignTable="od_demand_profiles">
			<reference local="od_demand_profile_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="vehicle_type_families">
			<reference local="vehicle_type_id" foreign="id"/>
		</foreign-key>
	</table>


	<!-- Downstream Boundary Capacities -->
	
	<table name="downstream_boundary_capacity_profile_sets">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
		<column name="project_id" required="true" domain="STRING_ID"/>
		<column name="name" domain="NAME_BUF"/>
		<column name="description" domain="DESCRIPTION_BUF"/>
	</table>

	<table name="downstream_boundary_capacity_profiles">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
		<column name="downstream_boundary_capacity_profile_set_id" required="true" domain="STRING_ID"/>
		<column name="link_id" required="true" domain="STRING_ID"/>
		<column name="dt" domain="DECIMAL" description="Sampling rate in seconds."/>
		<column name="start_time" required="true" domain="DECIMAL" description="Start time in seconds."/>
		<foreign-key foreignTable="downstream_boundary_capacity_profile_sets">
			<reference local="downstream_boundary_capacity_profile_set_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="link_families">
			<reference local="link_id" foreign="id"/>
		</foreign-key>
	</table>

	<table name="downstream_boundary_capacities">
		<column name="downstream_boundary_capacity_profile_id" primaryKey="true" domain="STRING_ID"/>
		<column name="ts" primaryKey="true" type="TIME" description="Here we only need time entry without date."/>
		<column name="downstream_boundary_capacity" required="true" domain="DECIMAL" description="Maximum flow that can exit this link in vph."/>
		<foreign-key foreignTable="downstream_boundary_capacity_profiles">
			<reference local="downstream_boundary_capacity_profile_id" foreign="id"/>
		</foreign-key>
	</table>


	<!-- Sensors TODO -->


	<!-- Signals -->

	<table name="signal_lists">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
		<column name="project_id" required="true" domain="STRING_ID"/>
		<column name="name" domain="NAME_BUF"/>
		<column name="description" domain="DESCRIPTION_BUF"/>
	</table>

	<table name="signals">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
		<column name="node_id" required="true" domain="STRING_ID"/>
		<column name="signal_list_id" required="true" domain="STRING_ID"/>
		<foreign-key foreignTable="node_families">
			<reference local="node_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="signal_lists">
			<reference local="signal_list_id" foreign="id"/>
		</foreign-key>
	</table>

	<table name="phases">
		<column name="signal_id" primaryKey="true" domain="STRING_ID"/>
		<column name="phase" primaryKey="true" type="INTEGER" description="Phase number: 1-16. Currently used are 1-8."/>
		<column name="protected" javaName="is_protected" required="true" domain="BOOL" description=""/>
		<column name="permissive" required="true" domain="BOOL" description=""/>
		<column name="lag" required="true" domain="BOOL" description=""/>
		<column name="recall" required="true" domain="BOOL" description=""/>
		<column name="min_green_time" required="true" domain="DECIMAL" description="Minimum green time in seconds."/>
		<column name="yellow_time" required="true" domain="DECIMAL" description="Yellow time in seconds."/>
		<column name="red_clear_time" required="true" domain="DECIMAL" description="Time required to clear the intersection after the signal turned red, in seconds."/>
		<foreign-key foreignTable="signals">
			<reference local="signal_id" foreign="id"/>
		</foreign-key>
	</table>

	<table name="phase_links">
		<column name="signal_id" primaryKey="true" domain="STRING_ID"/>
		<column name="phase" primaryKey="true" type="INTEGER" description="Phase number: 1-16. Currently used are 1-8."/>
		<column name="link_id" primaryKey="true" domain="STRING_ID"/>
		<foreign-key foreignTable="signals">
			<reference local="signal_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="link_families">
			<reference local="link_id" foreign="id"/>
		</foreign-key>
	</table>


	<!-- Controllers TODO -->


	<!-- Events TODO -->


	<!-- Main Scenario Tables -->

	<table name="scenarios">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
		<column name="project_id" required="true" domain="STRING_ID"/>
		<column name="network_connection_list_id" domain="STRING_ID"/>
		<column name="od_list_id" domain="STRING_ID"/>
		<column name="decision_point_split_profile_set_id" domain="STRING_ID"/>
		<column name="vehicle_type_list_id" domain="STRING_ID"/>
		<column name="signal_list_id" domain="STRING_ID"/>
		<column name="sensor_list_id" domain="STRING_ID"/>
		<column name="split_ratio_profile_set_id" domain="STRING_ID"/>
		<column name="weaving_factor_set_id" domain="STRING_ID"/>
		<column name="initial_density_set_id" domain="STRING_ID"/>
		<column name="fundamental_diagram_profile_set_id" domain="STRING_ID"/>
		<column name="demand_profile_set_id" domain="STRING_ID"/>
		<column name="od_demand_profile_set_id" domain="STRING_ID"/>
		<column name="downstream_boundary_capacity_profile_set_id" domain="STRING_ID"/>
		<column name="controller_set_id" domain="STRING_ID"/>
		<column name="event_set_id" domain="STRING_ID"/>
		<column name="name" domain="NAME_BUF"/>
		<column name="description" domain="DESCRIPTION_BUF"/>
		<foreign-key foreignTable="network_connection_lists">
			<reference local="network_connection_list_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="signal_lists">
			<reference local="signal_list_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="sensor_lists">
			<reference local="sensor_list_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="initial_density_sets">
			<reference local="initial_density_set_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="fundamental_diagram_profile_sets">
			<reference local="fundamental_diagram_profile_set_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="demand_profile_sets">
			<reference local="demand_profile_set_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="downstream_boundary_capacity_profile_sets">
			<reference local="downstream_boundary_capacity_profile_set_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="split_ratio_profile_sets">
			<reference local="split_ratio_profile_set_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="weaving_factor_sets">
			<reference local="weaving_factor_set_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="controller_sets">
			<reference local="controller_set_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="event_sets">
			<reference local="event_set_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="od_lists">
			<reference local="od_list_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="decision_point_split_profile_sets">
			<reference local="decision_point_split_profile_set_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="od_demand_profile_sets">
			<reference local="od_demand_profile_set_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="vehicle_type_lists">
			<reference local="vehicle_type_list_id" foreign="id"/>
		</foreign-key>
	</table>
	
	<table name="network_lists">
		<column name="scenario_id" required="true" domain="STRING_ID"/>
		<column name="network_id" required="true" domain="STRING_ID"/>
		<foreign-key foreignTable="scenarios">
			<reference local="scenario_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="networks">
			<reference local="network_id" foreign="id"/>
		</foreign-key>
	</table>
	
	





	<!-- **************************************************************************** -->



	<!-- Simulation Data -->

	<table name="data_sources">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
	</table>
	
	<table name="simulation_runs">
		<column name="data_source_id" primaryKey="true" domain="STRING_ID"/>
		<column name="scenario_id" required="true" domain="STRING_ID"/>
		<column name="run_number" required="true" type="INTEGER"/>
		<column name="start_time" required="true" type="TIMESTAMP"/>
		<column name="end_time" required="false" type="TIMESTAMP"/>
		<column name="status" required="true" domain="EXE_STATUS" description="Status of the run execution."/>
		<foreign-key foreignTable="data_sources">
			<reference local="data_source_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="scenarios">
			<reference local="scenario_id" foreign="id"/>
		</foreign-key>
	</table>
	





	<!-- **************************************************************************** -->



	<!-- Link Data -->
	
	<table name="link_data_total">
		<column name="link_id" primaryKey="true" domain="STRING_ID"/>
		<column name="network_id" primaryKey="true" domain="STRING_ID"/>
		<column name="data_source_id" primaryKey="true" domain="STRING_ID"/>
		<column name="ts" primaryKey="true" type="TIMESTAMP"/>
		<column name="aggregation" primaryKey="true" domain="AGGREGATION" description="Aggregation level: raw|1min|5min|15min|1hour|1day|total."/>
		<column name="in_flow" domain="DECIMAL"/>
		<column name="out_flow" domain="DECIMAL"/>
		<column name="density" domain="DECIMAL"/>
		<column name="occupancy" domain="DECIMAL"/>
		<column name="speed" domain="DECIMAL"/>
		<column name="in_flow_worst" domain="DECIMAL"/>
		<column name="out_flow_worst" domain="DECIMAL"/>
		<column name="density_worst" domain="DECIMAL"/>
		<column name="occupancy_worst" domain="DECIMAL"/>
		<column name="speed_worst" domain="DECIMAL"/>
		<column name="free_flow_speed" domain="DECIMAL" description="Free flow speed in mph."/>
		<column name="congestion_wave_speed" domain="DECIMAL" description="Congestion wave speed in mph."/>
		<column name="capacity" domain="DECIMAL" description="Maximum flow per lane in vehicles per hour per lane (vphl)."/>
		<column name="jam_density" domain="DECIMAL" description="Maximum density per lane in vehicles per mile per lane (vphl). Optional - used for trapezoidal fundamental diagrams."/>
		<column name="capacity_drop" domain="DECIMAL" description="Capacity drop in vphl. Optional."/>
		<column name="std_deviation_capacity" domain="DECIMAL" description="Expression of uncertainty in capacity in vphl. Optional."/>
		<foreign-key foreignTable="link_families">
			<reference local="link_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="networks">
			<reference local="network_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="data_sources">
			<reference local="data_source_id" foreign="id"/>
		</foreign-key>
	</table>

	<table name="link_data_detailed">
		<column name="link_id" primaryKey="true" domain="STRING_ID"/>
		<column name="network_id" primaryKey="true" domain="STRING_ID"/>
		<column name="data_source_id" primaryKey="true" domain="STRING_ID"/>
		<column name="od_id" primaryKey="true" domain="STRING_ID"/>
		<column name="route_segment_id" primaryKey="true" domain="STRING_ID"/>
		<column name="vehicle_type_id" primaryKey="true" domain="STRING_ID"/>
		<column name="ts" primaryKey="true" type="TIMESTAMP"/>
		<column name="aggregation" primaryKey="true" domain="AGGREGATION" description="Aggregation level: raw|1min|5min|15min|1hour|1day|total."/>
		<column name="in_flow" domain="DECIMAL"/>
		<column name="out_flow" domain="DECIMAL"/>
		<column name="density" domain="DECIMAL"/>
		<column name="occupancy" domain="DECIMAL"/>
		<column name="speed" domain="DECIMAL"/>
		<column name="in_flow_worst" domain="DECIMAL"/>
		<column name="out_flow_worst" domain="DECIMAL"/>
		<column name="density_worst" domain="DECIMAL"/>
		<column name="occupancy_worst" domain="DECIMAL"/>
		<column name="speed_worst" domain="DECIMAL"/>
		<foreign-key foreignTable="link_families">
			<reference local="link_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="networks">
			<reference local="network_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="data_sources">
			<reference local="data_source_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="vehicle_type_families">
			<reference local="vehicle_type_id" foreign="id"/>
		</foreign-key>
	</table>






	<!-- **************************************************************************** -->



	<!-- Link Performance Measures -->
	
	
	<table name="link_performance_total">
		<column name="link_id" primaryKey="true" domain="STRING_ID"/>
		<column name="network_id" primaryKey="true" domain="STRING_ID"/>
		<column name="data_source_id" primaryKey="true" domain="STRING_ID"/>
		<column name="ts" primaryKey="true" type="TIMESTAMP"/>
		<column name="aggregation" primaryKey="true" domain="AGGREGATION" description="Aggregation level: raw|1min|5min|15min|1hour|1day|total."/>
		<column name="vmt" domain="DECIMAL"/>
		<column name="vht" domain="DECIMAL"/>
		<column name="delay" domain="DECIMAL"/>
		<column name="travel_time" domain="DECIMAL"/>
		<column name="productivity_loss" domain="DECIMAL"/>
		<column name="los" domain="DECIMAL" description="LOS - Level Of Service as defined in Highway Capacity Manual."/>
		<column name="vc_ratio" domain="DECIMAL" description="Volume to capacity ratio."/>
		<column name="vmt_worst" domain="DECIMAL"/>
		<column name="vht_worst" domain="DECIMAL"/>
		<column name="delay_worst" domain="DECIMAL"/>
		<column name="travel_time_worst" domain="DECIMAL"/>
		<column name="productivity_loss_worst" domain="DECIMAL"/>
		<column name="los_worst" domain="DECIMAL"/>
		<column name="vc_ratio_worst" domain="DECIMAL"/>
		<foreign-key foreignTable="link_families">
			<reference local="link_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="networks">
			<reference local="network_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="data_sources">
			<reference local="data_source_id" foreign="id"/>
		</foreign-key>
	</table>
	
	<table name="link_performance_detailed">
		<column name="link_id" primaryKey="true" domain="STRING_ID"/>
		<column name="network_id" primaryKey="true" domain="STRING_ID"/>
		<column name="data_source_id" primaryKey="true" domain="STRING_ID"/>
		<column name="od_id" primaryKey="true" domain="STRING_ID"/>
		<column name="route_segment_id" primaryKey="true" domain="STRING_ID"/>
		<column name="vehicle_type_id" primaryKey="true" domain="STRING_ID"/>
		<column name="ts" primaryKey="true" type="TIMESTAMP"/>
		<column name="aggregation" primaryKey="true" domain="AGGREGATION" description="Aggregation level: raw|1min|5min|15min|1hour|1day|total."/>
		<column name="vmt" domain="DECIMAL"/>
		<column name="vht" domain="DECIMAL"/>
		<column name="delay" domain="DECIMAL"/>
		<column name="vmt_worst" domain="DECIMAL"/>
		<column name="vht_worst" domain="DECIMAL"/>
		<column name="delay_worst" domain="DECIMAL"/>
		<foreign-key foreignTable="link_families">
			<reference local="link_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="networks">
			<reference local="network_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="data_sources">
			<reference local="data_source_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="vehicle_type_families">
			<reference local="vehicle_type_id" foreign="id"/>
		</foreign-key>
	</table>




	
	<!-- **************************************************************************** -->



	<!-- Signal Data -->

	<table name="signal_data">
		<column name="signal_id" primaryKey="true" domain="STRING_ID"/>
		<column name="network_id" primaryKey="true" domain="STRING_ID"/>
		<column name="data_source_id" primaryKey="true" domain="STRING_ID"/>
		<column name="phase" primaryKey="true" type="INTEGER" description="Phase number: 1-16. Currently used are 1-8."/>
		<column name="ts" primaryKey="true" type="TIMESTAMP"/>
		<column name="aggregation" primaryKey="true" domain="AGGREGATION" description="Aggregation level: raw|1min|5min|15min|1hour|1day|total."/>
		<column name="begin_green" type="TIMESTAMP" description="Begin of the green period for the given phase. Optional - makes sense only for raw data." />
		<column name="duration" required="true" domain="DECIMAL" description="Duration of green for this phase in seconds."/>
		<foreign-key foreignTable="signals">
			<reference local="signal_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="networks">
			<reference local="network_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="data_sources">
			<reference local="data_source_id" foreign="id"/>
		</foreign-key>
	</table>
	




	<!-- Signal Performance -->

	<table name="signal_phase_performance">
		<column name="signal_id" primaryKey="true" domain="STRING_ID"/>
		<column name="network_id" primaryKey="true" domain="STRING_ID"/>
		<column name="data_source_id" primaryKey="true" domain="STRING_ID"/>
		<column name="phase" primaryKey="true" type="INTEGER" description="Phase number: 1-16. Currently used are 1-8."/>
		<column name="ts" primaryKey="true" type="TIMESTAMP"/>
		<column name="aggregation" primaryKey="true" domain="AGGREGATION" description="Aggregation level: raw|1min|5min|15min|1hour|1day|total."/>
		<column name="phase_utilization" domain="DECIMAL" description="Percentage of green used."/>
		<column name="progression_quality" domain="DECIMAL" description="Percentage of vehicles arriving during green phase."/>
		<column name="delay_per_cycle" domain="DECIMAL" description="Delay per cycle for given phase."/>
		<column name="queue_size" domain="DECIMAL" description="Size of the queue waiting for green phase."/>
		<column name="number_of_stops" type="INTEGER" description="Number of cycles needed to pass through intersection."/>
		<foreign-key foreignTable="signals">
			<reference local="signal_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="networks">
			<reference local="network_id" foreign="id"/>
		</foreign-key>
		<foreign-key foreignTable="data_sources">
			<reference local="data_source_id" foreign="id"/>
		</foreign-key>
	</table>






	<!-- TODO: temporary tables to be replaced with the actual ones -->

	<table name="sensor_lists">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
	</table>

	<table name="controller_sets">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
	</table>

	<table name="event_sets">
		<column name="id" primaryKey="true" domain="STRING_ID"/>
	</table>

</database>

